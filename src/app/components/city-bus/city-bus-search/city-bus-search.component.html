<div class="background">
  <div class="topbar">
    <img src="assets/topbar-logo.png"
    (click)="navigateToIndex()">
    <input #search
          placeholder="選擇路線或手動輸入關鍵字" 
          [(ngModel)]="searchInput"
          (focus)="onInputFocus()">
  </div>

  <div class="keyboard"
      [ngClass]="searchMode ? 'show' : 'hide'">
    <div *ngIf="keyboardMode==='number'"
          class="number">
      <div>
        <button (click)="this.keyboardMode='city'">
          <img src="assets/navigate-icon.png">
          {{selectedCity.label}}
        </button>
        <button>
          手動輸入
        </button>
      </div>
      <div>
        <ng-container *ngFor="let button of keyboardNumBtns">
          <ng-container [ngSwitch]="button.label">
            <ng-container *ngSwitchCase="'更多'">
              <button [ngStyle]="{color: button.textColor}"
                      (click)="this.keyboardMode='others'">
                      {{ button.label }}
              </button>
            </ng-container>
            <ng-container *ngSwitchCase="'C'">
              <button [ngStyle]="{color: button.textColor}"
                      (click)="onClearInput()">
                      {{ button.label }}
              </button>
            </ng-container>
            <ng-container *ngSwitchDefault>
              <button [ngStyle]="{color: button.textColor}"
                (click)="onSearch(button.label)">
                {{ button.label }}
              </button>
            </ng-container>
          </ng-container>
        </ng-container>
        <button (click)="onDeleteSingle()">
          <img src="assets/delete-icon.png">
        </button>
      </div>
    </div>

    <div *ngIf="keyboardMode==='city'"
          class="city" >
      <button *ngFor="let button of keyboardCityBtns"
              (click)="onSelectCity(button)"
              [ngClass]="selectedCity.label === button.label ? 'selected-button' : ''">
        {{ button.label }}
      </button>
      <button (click)="onSetSearchCity()">
        設定
      </button>
    </div>

    <div *ngIf="keyboardMode==='others'"
          class="others" >
      <button *ngFor="let button of keyboardOthersBtns"
              (click)="onSearch(button.label)">
        {{ button.label }}
      </button>
      <button (click)="this.keyboardMode='number'">
        回上一頁
      </button>
    </div>
  </div>

  <ng-container>
    <div class="search-result">
      <p>台北市</p>
      <div class="card-area" (scroll)="onScrollEvent()">
        <div (click)="navigateToRoute()">
          <p>紅10</p>
          <p>台北海大 - 劍潭捷運站</p>
        </div>
        <div>
          <p>紅10</p>
          <p>台北海大 - 劍潭捷運站</p>
        </div>
        <div>
          <p>紅10</p>
          <p>台北海大 - 劍潭捷運站</p>
        </div>
        <div>
          <p>紅10</p>
          <p>台北海大 - 劍潭捷運站</p>
        </div>
        <div>
          <p>紅10</p>
          <p>台北海大 - 劍潭捷運站</p>
        </div>
        <div>
          <p>紅10</p>
          <p>台北海大 - 劍潭捷運站</p>
        </div>
        <div>
          <p>紅10</p>
          <p>台北海大 - 劍潭捷運站</p>
        </div>
        <div>
          <p>紅10</p>
          <p>台北海大 - 劍潭捷運站</p>
        </div>
        <div>
          <p>紅10</p>
          <p>台北海大 - 劍潭捷運站</p>
        </div>
        <div>
          <p>紅10</p>
          <p>台北海大 - 劍潭捷運站</p>
        </div>
      </div>
    </div>
  </ng-container>
</div>
